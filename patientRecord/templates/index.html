{% extends "base.html" %}
{% block content %}

    <!-- BEGIN OFFCANVAS LEFT -->
    <div class="offcanvas">
    </div><!--end .offcanvas-->
    <!-- END OFFCANVAS LEFT -->

    <!-- BEGIN CONTENT-->
    <div id="content">
      <section>
        <div class="section-body">
          <div class="row">

            <!-- BEGIN ALERT - REVENUE -->
            <div class="col-md-3 col-sm-6">
              <div class="card">
                <div class="card-body no-padding">
                  <div class="alert alert-callout alert-info no-margin">
                    <strong class="pull-right text-success text-lg">{{ num_instances }} <i class="md md-trending-up"></i></strong>
                    <strong class="text-xl">{{ num_instances }}</strong><br/>
                    <span class="opacity-50">Drip Administered</span>
                    <div class="stick-bottom-left-right">
                      <div class="height-2 sparkline-revenue" data-line-color="#bdc1c1"></div>
                    </div>
                  </div>
                </div><!--end .card-body -->
              </div><!--end .card -->
            </div><!--end .col -->
            <!-- END ALERT - REVENUE -->

            <!-- BEGIN ALERT - VISITS -->
            <div class="col-md-3 col-sm-6">
              <div class="card">
                <div class="card-body no-padding">
                  <div class="alert alert-callout alert-warning no-margin">
                    <strong class="pull-right text-warning text-lg">{{ num_patients }} <i class="md md-swap-vert"></i></strong>
                    <strong class="text-xl">{{ num_patients }}</strong><br/>
                    <span class="opacity-50"> Total Patients</span>
                    <div class="stick-bottom-right">
                      <div class="height-1 sparkline-visits" data-bar-color="#e5e6e6"></div>
                    </div>
                  </div>
                </div><!--end .card-body -->
              </div><!--end .card -->
            </div><!--end .col -->
            <!-- END ALERT - VISITS -->

            <!-- BEGIN ALERT - BOUNCE RATES -->
            <div class="col-md-3 col-sm-6">
              <div class="card">
                <div class="card-body no-padding">
                  <div class="alert alert-callout alert-danger no-margin">
                    <strong class="pull-right text-success text-lg">{{ num_instances_admitted }} <i class="md md-trending-up"></i></strong>
                    <strong class="text-xl">{{ num_instances_admitted }}</strong><br/>
                    <span class="opacity-50">Current Treatment</span>
                    <div class="stick-bottom-left-right">
                      <div class="progress progress-hairline no-margin">
                        <div class="progress-bar progress-bar-danger" style="width:43%"></div>
                      </div>
                    </div>
                  </div>
                </div><!--end .card-body -->
              </div><!--end .card -->
            </div><!--end .col -->
            <!-- END ALERT - BOUNCE RATES -->

            <!-- BEGIN ALERT - TIME ON SITE -->
            <div class="col-md-3 col-sm-6">
              <div class="card">
                <div class="card-body no-padding">
                  <div class="alert alert-callout alert-success no-margin">
                    <h1 class="pull-right text-success"><i class="md md-timer"></i></h1>
                    <strong class="text-xl">{{ num_devices }}</strong><br/>
                    <span class="opacity-50">Devices</span>
                  </div>
                </div><!--end .card-body -->
              </div><!--end .card -->
            </div><!--end .col -->
            <!-- END ALERT - TIME ON SITE -->

          </div><!--end .row -->


          <!-- Main page for thingspeak embedded dashboard-->
          <div class="row">

            <!-- BEGIN SITE ACTIVITY -->
            <div class="col-md-9">
              <div class="card ">
                <div class="row">
                  <div class="col-md-8">
                    <div class="card-head">
                      <header>Real time monitoring</header>
                    </div><!--end .card-head -->
                    <div class="card-body height-8">
                      <!--div id="flot-visitors-legend" class="flot-legend-horizontal stick-top-right no-y-padding"></div-->
                      <!-- input thingsboard dashboard-->
                      <div class="flot height-7" data-title="Activity entry" data-color="#7dd8d2,#0aa89e">
                          <iframe width="550" height="260" style="border: 1px solid #cccccc;" src="https://thingspeak.com/channels/443979/charts/1?bgcolor=%23ffffff&color=%23d62020&dynamic=true&results=60&type=line"></iframe>
                      </div>
                    </div><!--end .card-body -->
                  </div><!--end .col -->
                  <div class="col-md-4">
                    <div class="card-head">
                      <header>Today's stats</header>
                    </div>
                    <div class="card-body height-8">
                      <strong>{{ num_patients }}</strong> Patients
                      <span class="pull-right text-success text-sm">{{ num_patients }} <i class="md md-trending-up"></i></span>
                      <div class="progress progress-hairline">
                        <div class="progress-bar progress-bar-primary-dark" style="width:43%"></div>
                      </div>
                      {{ num_visits }}{% if num_visits == 1 %} time{% else %} times{% endif %} Visits
                      <span class="pull-right text-success text-sm">{{ num_visits }} <i class="md md-trending-up"></i></span>
                      <div class="progress progress-hairline">
                        <div class="progress-bar progress-bar-primary-dark" style="width:11%"></div>
                      </div>
                      {{ num_instances }} Drips
                      <span class="pull-right text-success text-sm">{{ num_instances }} <i class="md md-trending-up"></i></span>
                      <div class="progress progress-hairline">
                        <div class="progress-bar progress-bar-primary-dark" style="width:93%"></div>
                      </div>
                      {{ num_devices }} {% if num_devices == 1 %} Device{% else %} Devices{% endif %}
                      <span class="pull-right text-success text-sm">{{ num_devices }} <i class="md md-trending-up"></i></span>
                      <div class="progress progress-hairline">
                        <div class="progress-bar progress-bar-primary-dark" style="width:63%"></div>
                      </div>
                      {{ num_instances_admitted }} patient in IV
                      <span class="pull-right text-success text-sm">{{ num_instances_admitted }} <i class="md md-trending-up"></i></span>
                      <div class="progress progress-hairline">
                        <div class="progress-bar progress-bar-primary-dark" style="width:47%"></div>
                      </div>
                    </div><!--end .card-body -->
                  </div><!--end .col -->
                </div><!--end .row -->
              </div><!--end .card -->
            </div><!--end .col -->
            <!-- END SITE ACTIVITY -->

            <!-- BEGIN SERVER STATUS -->
            <div class="col-md-3">
              <div class="card">
                <div class="card-head">
                  <header class="text-primary">Device communication </header>
                </div><!--end .card-head -->
                <div class="card-body height-4">
                  <div class="pull-right text-center">
                    <em class="text-primary">Status</em>
                    <br/>
                    <div id="serverStatusKnob" class="knob knob-shadow knob-primary knob-body-track size-2">
                      <input type="text" class="dial" data-min="0" data-max="100" data-thickness=".09" value="50" data-readOnly=true>
                    </div>
                  </div>
                </div><!--end .card-body -->
                <div class="card-body height-4 no-padding">
                  <div class="stick-bottom-left-right">
                    <div id="rickshawGraph" class="height-4" data-color1="#0aa89e" data-color2="rgba(79, 89, 89, 0.2)"></div>
                  </div>
                </div><!--end .card-body -->
              </div><!--end .card -->
            </div><!--end .col -->
            <!-- END SERVER STATUS -->

          </div><!--end .row -->


          <!-- Thingspeak dashboard ends-->

          <!--Menu set up -->
          <!-- BEGIN MENUBAR-->
			<div id="menubar" class="menubar-inverse ">
          <div class="menubar-fixed-panel">
            <div>
              <a class="btn btn-icon-toggle btn-default menubar-toggle" data-toggle="menubar" href="javascript:void(0);">
                <i class="fa fa-bars"></i>
              </a>
            </div>
            <div class="expanded">
              <a href="{% url 'index' %}">
                <span class="text-lg text-bold text-primary ">REALDRIP</span>
              </a>
            </div>
          </div>
          <div class="menubar-scroll-panel">
  
            <!-- BEGIN MAIN MENU -->
            <ul id="main-menu" class="gui-controls">
  
              <!-- BEGIN DASHBOARD -->
              <li>
                <a href="{% url 'index' %}" class="active">
                  <div class="gui-icon"><i class="md md-home"></i></div>
                  <span class="title">Dashboard</span>
                </a>
              </li><!--end /menu-li -->
              <!-- END DASHBOARD -->
  
              <!-- BEGIN PATIENT -->
              <li class="gui-folder">
                <a>
                  <div class="gui-icon"><i class="fa fa-puzzle-piece fa-fw"></i></div>
                  <span class="title">Patients</span>
                </a>
                <!--start submenu -->
                <ul>
                  <li><a href="{% url 'patients' %}" ><span class="title">Patients List</span></a></li>
                  <li><a href="{% url 'patient_create' %}" ><span class="title">Register Patient</span></a></li>
                </ul><!--end /submenu -->
              </li><!--end /menu-li -->
              <!-- END PATIENT -->
  
              <!-- BEGIN DEVICE -->
              <li class="gui-folder">
                <a>
                  <div class="gui-icon"><i class="fa fa-table"></i></div>
                  <span class="title">Device</span>
                </a>
                <!--start submenu -->
                <ul>
                  <li><a href="{% url 'devices' %}" ><span class="title">Device List</span></a></li>
                  <li><a href="{% url 'device_create' %}" ><span class="title">Register Device</span></a></li>
                </ul><!--end /submenu -->
              </li><!--end /menu-li -->
              <!-- END DEVICE -->
  
              <!-- BEGIN USER -->
              <li class="gui-folder">
                <a>
                  <div class="gui-icon"><span class="md md-account-box"></span></div>
                  <span class="title">{{ user.get_username }}</span>
                </a>
                <!--start submenu -->
                <ul>
                  <li><a href="{% url 'password_change' %}" ><span class="title">Change Password</span></a></li>
                  <li><a href="{% url 'logout' %}" ><span class="title">Logout</span></a></li>
                  
                </ul><!--end /submenu -->
              </li><!--end /menu-li -->
              <!-- END USER -->
  
              <!-- BEGIN SETTINGS -->
              <li>
                <a href="" >
                  <div class="gui-icon"><i class="md md-settings-overscan"></i></div>
                  <span class="title">Settings</span>
                </a>
              </li><!--end /menu-li -->
              <!-- END CHARTS -->
            </ul><!--end .main-menu -->
            <!-- END MAIN MENU -->
  
            <div class="menubar-foot-panel">
              <small class="no-linebreak hidden-folded">
                <span class="opacity-75">Copyright &copy; 2018</span> <strong>RealDrip</strong>
              </small>
            </div>
          </div><!--end .menubar-scroll-panel-->
        </div><!--end #menubar-->
        <!-- END MENUBAR -->

{% endblock %}
